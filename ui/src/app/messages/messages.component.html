<mat-expansion-panel [expanded]="panelOpenState"
    (opened)="panelOpenState = true"
    (closed)="panelOpenState = false">

  <mat-expansion-panel-header>
    <mat-panel-title>Messages</mat-panel-title>
    <mat-panel-description>{{messageService.count()}} messages</mat-panel-description>
  </mat-expansion-panel-header>

  <table *ngIf="messageService.hasMessages()">
    <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">Service</th>
        <th scope="col">Type</th>
        <th scope="col">Message</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor='let m of messageService.get(); index as i'>
        <th scope="row">{{i + 1}}</th>
        <td>{{m.serviceName}}</td>
        <td>{{m.messageType}}</td>
        <td>{{m.message}}</td>
      </tr>
    </tbody>
  </table>

  <mat-action-row>
    <button mat-raised-button color="primary"
        [disabled]="!messageService.hasMessages()"
        [disabledInteractive]="!messageService.hasMessages()"
        (click)="messageService.clear()">
      Clear messages
    </button>
  </mat-action-row>

</mat-expansion-panel>
